{"ast":null,"code":"import { PaperTable } from \"@/components\";\nimport ProductService from \"@/services/ProductService\";\nimport { Toast } from \"vue-toastification\"; // Import Toast từ vue-toastification\nimport \"vue-toastification/dist/index.css\"; // Import CSS của Toast\n\nexport default {\n  components: {\n    PaperTable\n  },\n  data() {\n    return {\n      table1: {\n        title: \"Product List\",\n        subTitle: \"Manage all products available in the shop\",\n        columns: [\"Id\", \"Image\", \"Name\", \"Price\", \"Quantity\", \"Description\"],\n        data: []\n      },\n      showAddProductModal: false,\n      showEditProductModal: false,\n      newProduct: {\n        id: \"\",\n        img: \"\",\n        name: \"\",\n        price: \"\",\n        quantity: \"\",\n        description: \"\"\n      },\n      editProduct: null\n    };\n  },\n  created() {\n    this.fetchProducts();\n  },\n  methods: {\n    fetchProducts() {\n      ProductService.getProducts().then(response => {\n        this.table1.data = response.data;\n      }).catch(error => {\n        console.error(\"Error fetching products:\", error);\n      });\n    },\n    handleEditItem(item) {\n      this.editProduct = {\n        ...item\n      };\n      this.showEditProductModal = true;\n    },\n    updateProduct() {\n      ProductService.updateProduct(this.editProduct.id, this.editProduct).then(() => {\n        const index = this.table1.data.findIndex(product => product.id === this.editProduct.id);\n        if (index !== -1) {\n          this.table1.data.splice(index, 1, {\n            ...this.editProduct\n          });\n        }\n        this.showEditProductModal = false;\n        this.editProduct = null;\n\n        // Hiển thị thông báo khi cập nhật thành công\n        this.$toast.success(\"Product updated successfully!\");\n      }).catch(error => {\n        console.error(\"Error updating product:\", error);\n      });\n    },\n    handleDeleteItem(item) {\n      ProductService.deleteProduct(item.id).then(() => {\n        this.table1.data = this.table1.data.filter(dataItem => dataItem.id !== item.id);\n      }).catch(error => {\n        console.error(\"Error deleting product:\", error);\n      });\n    },\n    addProduct() {\n      // Tạo id tự động tăng nếu chưa có id cho sản phẩm\n      if (this.newProduct.id === \"\" || this.newProduct.id === null) {\n        this.newProduct.id = this.table1.data.length ? Math.max(...this.table1.data.map(product => product.id)) + 1 : 1;\n      }\n      ProductService.createProduct(this.newProduct).then(response => {\n        this.table1.data.push(response.data);\n        this.resetNewProduct();\n        this.showAddProductModal = false;\n      }).catch(error => {\n        console.error(\"Error adding product:\", error);\n      });\n    },\n    resetNewProduct() {\n      this.newProduct = {\n        id: null,\n        img: null,\n        name: \"\",\n        price: \"\",\n        quantity: \"\",\n        description: \"\"\n      };\n    }\n  }\n};","map":{"version":3,"names":["PaperTable","ProductService","Toast","components","data","table1","title","subTitle","columns","showAddProductModal","showEditProductModal","newProduct","id","img","name","price","quantity","description","editProduct","created","fetchProducts","methods","getProducts","then","response","catch","error","console","handleEditItem","item","updateProduct","index","findIndex","product","splice","$toast","success","handleDeleteItem","deleteProduct","filter","dataItem","addProduct","length","Math","max","map","createProduct","push","resetNewProduct"],"sources":["src/pages/ProductManage.vue"],"sourcesContent":["<template>\n  <div class=\"row\">\n    <div class=\"col-12\">\n      <card :title=\"table1.title\" :subTitle=\"table1.subTitle\">\n        <div slot=\"raw-content\" class=\"table-responsive\">\n          <paper-table \n            :data=\"table1.data\" \n            :columns=\"table1.columns\"\n            @edit-item=\"handleEditItem\"\n            @delete-item=\"handleDeleteItem\"\n          >\n          \n          </paper-table>\n        </div>\n      </card>\n      <button class=\"btn btn-success mt-3\" @click=\"showAddProductModal = true\">Add new product</button>\n    </div>\n\n    <!-- Modal for Adding Product -->\n    <div v-if=\"showAddProductModal\" class=\"modal fade show\" tabindex=\"-1\" style=\"display: block;\">\n        <!-- Background overlay -->\n  <div class=\"modal-backdrop fade show\"></div>\n      <div class=\"modal-dialog\">\n        <div class=\"modal-content\">\n          <div class=\"modal-header\">\n            <h5 class=\"modal-title\">Add New Product</h5>\n            <button type=\"button\" class=\"close\" @click=\"showAddProductModal = false\">\n              <span>&times;</span>\n            </button>\n          </div>\n          <div class=\"modal-body\">\n            <form @submit.prevent=\"addProduct\">\n              <div class=\"form-group\">\n                <label for=\"img\">Image URL:</label>\n                <input type=\"text\" class=\"form-control\" v-model=\"newProduct.img\" required />\n              </div>\n              <div class=\"form-group\">\n                <label for=\"name\">Name:</label>\n                <input type=\"text\" class=\"form-control\" v-model=\"newProduct.name\" required />\n              </div>\n              <div class=\"form-group\">\n                <label for=\"price\">Price:</label>\n                <input type=\"number\" class=\"form-control\" v-model=\"newProduct.price\" required />\n              </div>\n              <div class=\"form-group\">\n                <label for=\"quantity\">Quantity:</label>\n                <input type=\"number\" class=\"form-control\" v-model=\"newProduct.quantity\" required />\n              </div>\n              <div class=\"form-group\">\n                <label for=\"description\">Description:</label>\n                <textarea class=\"form-control\" v-model=\"newProduct.description\" required></textarea>\n              </div>\n              <div class=\"form-group\">\n          <label for=\"status\">Status:</label>\n          <select class=\"form-control\" v-model=\"editProduct.status\" required>\n            <option value=\"active\">Active</option>\n            <option value=\"inactive\">Inactive</option>\n            <option value=\"out_of_stock\">Out of Stock</option>\n          </select>\n        </div>\n              <button type=\"submit\" class=\"btn btn-primary mr-2\">Save</button>\n              <button type=\"button\" class=\"btn btn-secondary\" @click=\"showAddProductModal = false\">Cancel</button>\n            </form>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- Modal for Editing Product -->\n    <div v-if=\"showEditProductModal\" class=\"modal fade show\" tabindex=\"-1\" style=\"display: block;\">\n              <!-- Background overlay -->\n  <div class=\"modal-backdrop fade show\"></div>\n      <div class=\"modal-dialog\">\n        <div class=\"modal-content\">\n          <div class=\"modal-header\">\n            <h5 class=\"modal-title\">Edit Product</h5>\n            <button type=\"button\" class=\"close\" @click=\"showEditProductModal = false\">\n              <span>&times;</span>\n            </button>\n          </div>\n          <div class=\"modal-body\">\n            <form @submit.prevent=\"updateProduct\">\n              <div class=\"form-group\">\n                <label for=\"img\">Image URL:</label>\n                <input type=\"text\" class=\"form-control\" v-model=\"editProduct.img\" required />\n              </div>\n              <div class=\"form-group\">\n                <label for=\"name\">Name:</label>\n                <input type=\"text\" class=\"form-control\" v-model=\"editProduct.name\" required />\n              </div>\n              <div class=\"form-group\">\n                <label for=\"price\">Price:</label>\n                <input type=\"number\" class=\"form-control\" v-model=\"editProduct.price\" required />\n              </div>\n              <div class=\"form-group\">\n                <label for=\"quantity\">Quantity:</label>\n                <input type=\"number\" class=\"form-control\" v-model=\"editProduct.quantity\" required />\n              </div>\n              <div class=\"form-group\">\n                <label for=\"description\">Description:</label>\n                <textarea class=\"form-control\" v-model=\"editProduct.description\" required></textarea>\n              </div>\n              <div class=\"form-group\">\n                <label for=\"status\">Status:</label>\n                <select class=\"form-control\" v-model=\"editProduct.status\" required>\n                  <option value=\"active\">Active</option>\n                  <option value=\"inactive\">Inactive</option>\n                </select>\n              </div>\n              <button type=\"submit\" class=\"btn btn-primary mr-2\">Save</button>\n              <button type=\"button\" class=\"btn btn-secondary\" @click=\"showEditProductModal = false\">Cancel</button>\n            </form>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { PaperTable } from \"@/components\";\nimport ProductService from \"@/services/ProductService\";\nimport { Toast } from \"vue-toastification\"; // Import Toast từ vue-toastification\nimport \"vue-toastification/dist/index.css\"; // Import CSS của Toast\n\nexport default {\n  components: {\n    PaperTable,\n  },\n  data() {\n    return {\n      table1: {\n        title: \"Product List\",\n        subTitle: \"Manage all products available in the shop\",\n        columns: [\"Id\", \"Image\", \"Name\", \"Price\", \"Quantity\", \"Description\"],\n        data: [],\n      },\n      showAddProductModal: false,\n      showEditProductModal: false,\n      newProduct: {\n        id: \"\",\n        img: \"\",\n        name: \"\",\n        price: \"\",\n        quantity: \"\",\n        description: \"\",\n      },\n      editProduct: null,\n    };\n  },\n  created() {\n    this.fetchProducts();\n  },\n  methods: {\n    fetchProducts() {\n      ProductService.getProducts()\n        .then(response => {\n          this.table1.data = response.data;\n        })\n        .catch(error => {\n          console.error(\"Error fetching products:\", error);\n        });\n    },\n    handleEditItem(item) {\n      this.editProduct = { ...item };\n      this.showEditProductModal = true;\n    },\n    updateProduct() {\n      ProductService.updateProduct(this.editProduct.id, this.editProduct)\n        .then(() => {\n          const index = this.table1.data.findIndex(product => product.id === this.editProduct.id);\n          if (index !== -1) {\n            this.table1.data.splice(index, 1, { ...this.editProduct });\n          }\n          this.showEditProductModal = false;\n          this.editProduct = null;\n\n          // Hiển thị thông báo khi cập nhật thành công\n          this.$toast.success(\"Product updated successfully!\");\n        })\n        .catch(error => {\n          console.error(\"Error updating product:\", error);\n        });\n    },\n    handleDeleteItem(item) {\n      ProductService.deleteProduct(item.id)\n        .then(() => {\n          this.table1.data = this.table1.data.filter(dataItem => dataItem.id !== item.id);\n        })\n        .catch(error => {\n          console.error(\"Error deleting product:\", error);\n        });\n    },\n    addProduct() {\n        // Tạo id tự động tăng nếu chưa có id cho sản phẩm\n  if (this.newProduct.id === \"\" || this.newProduct.id === null) {\n    this.newProduct.id = this.table1.data.length ? Math.max(...this.table1.data.map(product => product.id)) + 1 : 1;\n  }\n      ProductService.createProduct(this.newProduct)\n        .then(response => {\n          this.table1.data.push(response.data);\n          this.resetNewProduct();\n          this.showAddProductModal = false;\n        })\n        .catch(error => {\n          console.error(\"Error adding product:\", error);\n        });\n    },\n    resetNewProduct() {\n      this.newProduct = { id: null, img: null, name: \"\", price: \"\", quantity: \"\", description: \"\" };\n    },\n  },\n};\n</script>\n\n<style scoped>\n.modal-body .form-control {\n  background-color: #f8f9fa;\n  border: 1px solid #ced4da;\n  border-radius: 0.25rem;\n}\n\n.modal-body .form-control:focus {\n  border-color: #80bdff;\n  box-shadow: 0 0 0 0.2rem rgba(38, 143, 255, 0.25);\n  \n}\n\n/* Mờ nền khi modal hiển thị */\n.modal.fade.show {\n  display: block !important;\n}\n\n.modal-backdrop {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 1); /* Nền mờ */\n  z-index: 1040; /* Đảm bảo lớp backdrop ở dưới cùng */\n}\n\n.modal-dialog {\n  z-index: 1050; /* Đảm bảo modal content ở trên backdrop */\n}\n\n.modal-content {\n  border-radius: 0.25rem;\n  overflow: hidden;\n}\n</style>\n"],"mappings":"AAwHA,SAAAA,UAAA;AACA,OAAAC,cAAA;AACA,SAAAC,KAAA;AACA;;AAEA;EACAC,UAAA;IACAH;EACA;EACAI,KAAA;IACA;MACAC,MAAA;QACAC,KAAA;QACAC,QAAA;QACAC,OAAA;QACAJ,IAAA;MACA;MACAK,mBAAA;MACAC,oBAAA;MACAC,UAAA;QACAC,EAAA;QACAC,GAAA;QACAC,IAAA;QACAC,KAAA;QACAC,QAAA;QACAC,WAAA;MACA;MACAC,WAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,aAAA;EACA;EACAC,OAAA;IACAD,cAAA;MACAnB,cAAA,CAAAqB,WAAA,GACAC,IAAA,CAAAC,QAAA;QACA,KAAAnB,MAAA,CAAAD,IAAA,GAAAoB,QAAA,CAAApB,IAAA;MACA,GACAqB,KAAA,CAAAC,KAAA;QACAC,OAAA,CAAAD,KAAA,6BAAAA,KAAA;MACA;IACA;IACAE,eAAAC,IAAA;MACA,KAAAX,WAAA;QAAA,GAAAW;MAAA;MACA,KAAAnB,oBAAA;IACA;IACAoB,cAAA;MACA7B,cAAA,CAAA6B,aAAA,MAAAZ,WAAA,CAAAN,EAAA,OAAAM,WAAA,EACAK,IAAA;QACA,MAAAQ,KAAA,QAAA1B,MAAA,CAAAD,IAAA,CAAA4B,SAAA,CAAAC,OAAA,IAAAA,OAAA,CAAArB,EAAA,UAAAM,WAAA,CAAAN,EAAA;QACA,IAAAmB,KAAA;UACA,KAAA1B,MAAA,CAAAD,IAAA,CAAA8B,MAAA,CAAAH,KAAA;YAAA,QAAAb;UAAA;QACA;QACA,KAAAR,oBAAA;QACA,KAAAQ,WAAA;;QAEA;QACA,KAAAiB,MAAA,CAAAC,OAAA;MACA,GACAX,KAAA,CAAAC,KAAA;QACAC,OAAA,CAAAD,KAAA,4BAAAA,KAAA;MACA;IACA;IACAW,iBAAAR,IAAA;MACA5B,cAAA,CAAAqC,aAAA,CAAAT,IAAA,CAAAjB,EAAA,EACAW,IAAA;QACA,KAAAlB,MAAA,CAAAD,IAAA,QAAAC,MAAA,CAAAD,IAAA,CAAAmC,MAAA,CAAAC,QAAA,IAAAA,QAAA,CAAA5B,EAAA,KAAAiB,IAAA,CAAAjB,EAAA;MACA,GACAa,KAAA,CAAAC,KAAA;QACAC,OAAA,CAAAD,KAAA,4BAAAA,KAAA;MACA;IACA;IACAe,WAAA;MACA;MACA,SAAA9B,UAAA,CAAAC,EAAA,gBAAAD,UAAA,CAAAC,EAAA;QACA,KAAAD,UAAA,CAAAC,EAAA,QAAAP,MAAA,CAAAD,IAAA,CAAAsC,MAAA,GAAAC,IAAA,CAAAC,GAAA,SAAAvC,MAAA,CAAAD,IAAA,CAAAyC,GAAA,CAAAZ,OAAA,IAAAA,OAAA,CAAArB,EAAA;MACA;MACAX,cAAA,CAAA6C,aAAA,MAAAnC,UAAA,EACAY,IAAA,CAAAC,QAAA;QACA,KAAAnB,MAAA,CAAAD,IAAA,CAAA2C,IAAA,CAAAvB,QAAA,CAAApB,IAAA;QACA,KAAA4C,eAAA;QACA,KAAAvC,mBAAA;MACA,GACAgB,KAAA,CAAAC,KAAA;QACAC,OAAA,CAAAD,KAAA,0BAAAA,KAAA;MACA;IACA;IACAsB,gBAAA;MACA,KAAArC,UAAA;QAAAC,EAAA;QAAAC,GAAA;QAAAC,IAAA;QAAAC,KAAA;QAAAC,QAAA;QAAAC,WAAA;MAAA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}